name: Auto Add Issues to Project

on:
  issues:
    types: [opened]

jobs:
  add-to-project:
    runs-on: ubuntu-latest
    steps:
      - name: Add issue to project
        uses: actions/github-script@v6
        with:
          script: |

            const project = await github.projects.get({
              owner: 'Super-Sod',
              repo: context.repo.repo,
              project_number: 1
            });

            const columns = await github.projects.listColumns({
              project_id: project.data.id
            });

            const column = columns.data[1];

            await github.projects.createCard({
              column_id: column.id,
              content_id: context.payload.issue.id,
              content_type: 'Issue'
            });
